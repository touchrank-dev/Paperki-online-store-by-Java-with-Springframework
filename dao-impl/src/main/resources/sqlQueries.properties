user.getByLoginPassword =   SELECT * FROM users \
                            WHERE login_user = :p_user_login AND password = :p_user_password;

user.getByLogin =       SELECT * FROM users \
                        WHERE login_user = :p_user_login;

user.getById =          SELECT * FROM users \
                        WHERE id_user = :p_user_id;

user.add =              INSERT INTO users (name_user, login_user, email, subscribe, password, phone) \
                        VALUES (:p_user_name, :p_user_login, :p_user_email, :p_user_subscribe, :p_user_password, :p_user_phone);

enterprise.add =        INSERT INTO enterprise (id_user, unp, name) \
                        VALUES (:p_user_id, :p_enterprise_unp, :p_enterprise_name );

enterprise.getByUNP =   SELECT * FROM enterprise WHERE unp = :p_enterprise_unp;

payment.account.add =   INSERT INTO payment_accounts (id_enterprise, bank_name, bank_code, account_number) \
                        VALUES (:p_id_enterprise, :p_bank_name, :p_bank_code, :p_account_number);

# =================================================================================================

catalog.getAll =        SELECT c.*, cf.parent_id_catalog AS parent \
                        FROM catalog AS c \
                        JOIN catalog_ref AS cf ON cf.id_catalog = c.id_catalog \
                        ORDER BY parent, c.order_catalog;

catalog.getAllByStock=  SELECT DISTINCT c.*, cf.parent_id_catalog AS parent \
                        FROM stock AS s \
                        JOIN product_catalog AS pc using(id_product) \
                        JOIN catalog AS c using(id_catalog) \
                        JOIN catalog_ref AS cf ON cf.id_catalog = c.id_catalog \
                        ORDER BY parent, c.order_catalog;

catalog.getByTName =    SELECT * FROM catalog WHERE translit_name = :p_category_t_name;

# =================================================================================================

product.getProductsByCategoryTName =    SELECT  p.*, \
                                                pp.*, \
                                                pd.short_description, \
                                                pd.full_description, \
                                                b.name AS bname, \
                                                b.translit_name AS btname, \
                                                s.quantity_available, \
                                                d.value_double, d.value_int, dt.type AS dtype \
                                        FROM products AS p \
                                        LEFT JOIN brands AS b USING(id_brand) \
                                        LEFT JOIN product_prices AS pp USING(id_product) \
                                        LEFT JOIN product_description AS pd USING(id_product) \
                                        LEFT JOIN product_catalog AS pc USING(id_product) \
                                        LEFT JOIN catalog AS c USING(id_catalog) \
                                        LEFT JOIN stock AS s USING(id_product) \
                                        LEFT JOIN discounts AS d USING(id_product) \
                                        LEFT JOIN discount_types AS dt USING(id_discount_type) \
                                        WHERE c.translit_name = :p_category_t_name \
                                        ORDER BY pc.order_product, pp.quantity_start;

product.getProductByTName =     SELECT  p.*, \
                                        pp.*, \
                                        pd.short_description, \
                                        pd.full_description, \
                                        b.name AS bname, \
                                        b.translit_name AS btname, \
                                        s.quantity_available, \
                                        d.value_double, d.value_int, dt.type AS dtype \
                                FROM products AS p \
                                LEFT JOIN brands AS b USING(id_brand) \
                                LEFT JOIN product_prices AS pp USING(id_product) \
                                LEFT JOIN product_description AS pd USING(id_product) \
                                LEFT JOIN product_catalog AS pc USING(id_product) \
                                LEFT JOIN catalog AS c USING(id_catalog) \
                                LEFT JOIN stock AS s USING(id_product) \
                                LEFT JOIN discounts AS d USING(id_product) \
                                LEFT JOIN discount_types AS dt USING(id_discount_type) \
                                WHERE p.translit_name = :p_product_t_name \
                                ORDER BY pp.quantity_start;

product.getByPNT=       SELECT  p.*, \
                                pp.*, \
                                pd.short_description, \
                                pd.full_description, \
                                b.name AS bname, \
                                b.translit_name AS btname, \
                                s.quantity_available, \
                                d.value_double, d.value_int, dt.type AS dtype \
                        FROM products AS p \
                        LEFT JOIN brands AS b USING(id_brand) \
                        LEFT JOIN product_prices AS pp USING(id_product) \
                        LEFT JOIN product_description AS pd USING(id_product) \
                        LEFT JOIN product_catalog AS pc USING(id_product) \
                        LEFT JOIN catalog AS c USING(id_catalog) \
                        LEFT JOIN stock AS s USING(id_product) \
                        LEFT JOIN discounts AS d USING(id_product) \
                        LEFT JOIN discount_types AS dt USING(id_discount_type) \
                        WHERE p.pnt = :p_pnt \
                        ORDER BY pp.quantity_start;

product.getCartProductByPNT =   SELECT  p.pnt, \
                                        pp.quantity_start, \
                                        pp.value, \
                                        p.vat, \
                                        p.full_name, \
                                        p.short_name, \
                                        s.quantity_available \
                                        d.value_double, d.value_int, dt.type AS dtype \
                                FROM stock AS s \
                                LEFT JOIN products AS p USING(id_product) \
                                LEFT JOIN product_prices AS pp USING(id_product) \
                                LEFT JOIN discounts AS d USING(id_product) \
                                LEFT JOIN discount_types AS dt USING(id_discount_type) \
                                WHERE p.pnt = :p_pnt \
                                ORDER BY pp.quantity_start;


product.getAvailableProductByPNT=   SELECT  p.pnt, \
                                        pp.quantity_start, \
                                        pp.value, \
                                        p.vat, \
                                        s.quantity_available, \
                                        d.value_double, d.value_int, dt.type AS dtype \
                                FROM stock AS s \
                                LEFT JOIN products AS p USING(id_product) \
                                LEFT JOIN product_prices AS pp USING(id_product) \
                                LEFT JOIN discounts AS d USING(id_product) \
                                LEFT JOIN discount_types AS dt USING(id_discount_type) \
                                WHERE p.pnt = :p_pnt \
                                ORDER BY pp.quantity_start;

# =================================================================================================

menu.getAll =           SELECT m.id_menu, mi.* \
                        FROM menu AS m \
                        JOIN menu_item_ref AS mir ON mir.id_menu = m.id_menu \
                        LEFT JOIN menu_items AS mi ON mi.id_menu_item = mir.id_menu_item \
                        WHERE m.translit_name = :p_translit_name_menu \
                        ORDER BY mi.order_item;

menu.getByTName =       SELECT m.id_menu, mi.* \
                        FROM menu AS m \
                        JOIN menu_item_ref AS mir ON mir.id_menu = m.id_menu \
                        LEFT JOIN menu_items AS mi ON mi.id_menu_item = mir.id_menu_item \
                        WHERE m.translit_name = :p_translit_name_menu AND mi.translit_name = :p_translit_name \
                        ORDER BY mi.order_item;
